<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>ポーチ階段計算 | 現場計算 PRO</title>
    <meta name="description" content="基礎高と道路のBM（ベンチマーク）から、玄関ポーチの蹴上寸法を自動で割り付ける外構用ツール。">
    <meta name="keywords" content="ポーチ,階段,蹴上,割付,外構,基礎高">
    
    <meta name="google-adsense-account" content="ca-pub-5476919369993440">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5476919369993440" crossorigin="anonymous"></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-ERMFG5G32F"></script>
    <script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js',new Date());gtag('config','G-ERMFG5G32F');</script>

    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,300,0,0" />
    
    <style>
        /* (concrete.htmlと同じ共通CSSを使用) */
        :root { --bg: #121212; --card: #1e1e1e; --blue: #00d4ff; --orange: #ff9500; --text: #e0e0e0; --border: #333;}
        * { box-sizing: border-box; touch-action: manipulation; }
        body { font-family: -apple-system, sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: env(safe-area-inset-top) 0 calc(100px + env(safe-area-inset-bottom)); line-height: 1.6; }
        .container { width: 100%; max-width: 600px; margin: 0 auto; padding: 15px; }
        header { display: flex; justify-content: space-between; align-items: flex-start; border-left: 5px solid var(--blue); padding-left: 15px; margin-bottom: 20px; }
        header h1 { font-size: 1.3rem; margin: 0; color: white; }
        header p { font-size: 0.7rem; color: var(--blue); margin: 0; font-weight: bold; }
        .card { background: var(--card); border: 1px solid var(--border); border-radius: 12px; padding: 15px; margin-bottom: 20px; box-shadow: 0 4px 10px rgba(0,0,0,0.3); }
        .input-group { display: flex; gap: 10px; margin-bottom: 12px; }
        .input-box { flex: 1; background: #2a2a2a; border: 2px solid var(--border); border-radius: 10px; padding: 8px 12px; }
        .input-box label { display: block; font-size: 0.65rem; color: var(--blue); font-weight: bold; }
        .input-box span { display: block; font-size: 0.55rem; color: #888; }
        .input-box input { width: 100%; background: transparent; border: none; color: white; font-size: 1.2rem; outline: none; font-weight: bold; }
        .main-btn { width: 100%; padding: 18px; border: none; border-radius: 12px; background: linear-gradient(135deg, #00d4ff, #008fb3); color: white; font-weight: bold; font-size: 1rem; cursor: pointer; }
        #elevation-svg { background: #000; border-radius: 8px; width: 100%; height: auto; margin-top: 10px; border: 1px solid #333; }
        
        .article-section { margin-top: 40px; padding: 30px 20px; background: #1a1a1a; border-radius: 12px; border-top: 4px solid var(--blue); }
        .article-section h3 { color: #fff; font-size: 1rem; margin-top: 0; margin-bottom: 10px; display: flex; align-items: center; gap:8px; }
        .article-section h3 .material-symbols-outlined { color: var(--orange); }
        .article-section p { font-size: 0.9rem; color: #ccc; margin-bottom: 15px; line-height: 1.8; }

        nav { position: fixed; bottom: 0; left: 0; width: 100%; background: rgba(18, 18, 18, 0.95); backdrop-filter: blur(12px); border-top: 1px solid #333; display: flex; justify-content: space-around; padding-bottom: env(safe-area-inset-bottom); height: calc(60px + env(safe-area-inset-bottom)); z-index: 1000; }
        .nav-item { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; color: #666; text-decoration: none; padding-top: 8px; }
        .nav-item .material-symbols-outlined { font-size: 24px; font-weight: 300; margin-bottom: 2px; }
        .nav-item span:last-child { font-size: 0.65rem; font-weight: 500; }
        .nav-item.active { color: var(--blue); }
        .nav-item.active .material-symbols-outlined { text-shadow: 0 0 12px rgba(0, 212, 255, 0.4); }
    </style>
</head>

<body>
<div class="container">
    <header><h1>ポーチ計算 PRO</h1><p>高低差から蹴上を自動算出</p></header>
    <div class="card">
        <div class="input-group">
            <div class="input-box"><label>① BM - 道路 (mm)</label><span>低いなら正</span><input type="number" id="road_bm" value="200"></div>
            <div class="input-box"><label>② 段数</label><span>ポーチ天含む</span><input type="number" id="step_count" value="2"></div>
        </div>
        <div class="input-group">
            <div class="input-box"><label>③ 基礎高 (GLから)</label><input type="number" id="gl_base" value="410"></div>
            <div class="input-box"><label>④ 道路〜1段目(mm)</label><span>距離</span><input type="number" id="dist_road" value="2000"></div>
        </div>
        <div class="input-box" style="width:100%;"><label>⑤ GL - BM (mm)</label><span>高いなら正</span><input type="number" id="gl_bm" value="50"></div>
        <button class="main-btn" style="margin-top:15px;" onclick="calculateStair()">蹴上寸法を算出</button>
    </div>
    <div id="stair-result" style="display:none;" class="card">
        <div style="font-size:0.7rem; color:var(--orange);">蹴上（一段あたり）</div>
        <div style="font-size:2rem; font-weight:bold; color:var(--orange);" id="keage_res">--- mm</div>
        <svg id="elevation-svg" viewBox="0 0 400 350"></svg>
    </div>

    <article class="article-section">
        <h3><span class="material-symbols-outlined">stairs</span> 玄関ポーチ・外構階段の割付</h3>
        <p>道路のGL（地盤面）と玄関ドアの差を埋めるポーチタイルの割付を計算します。道路から建物までの勾配（2%推奨）を考慮し、<strong>均等な蹴上（けあげ）寸法</strong>を算出することで、歩きやすく美しい外構を実現します。</p>
    </article>

    <div style="text-align:center; padding: 10px 0 80px 0; font-size: 0.7rem;">
        <span style="color: #666;">© 2026 現場計算 PRO</span>
    </div>

    <nav>
        <a href="index.html" class="nav-item"><span class="material-symbols-outlined">square_foot</span><span>対角</span></a>
        <a href="stair.html" class="nav-item active"><span class="material-symbols-outlined">stairs</span><span>ポーチ</span></a>
        <a href="concrete.html" class="nav-item"><span class="material-symbols-outlined">water_drop</span><span>生コン</span></a>
        <a href="soil.html" class="nav-item"><span class="material-symbols-outlined">landscape</span><span>残土</span></a>
    </nav>
</div>

<script>
    function calculateStair() {
        const road = parseFloat(document.getElementById('road_bm').value) || 0;
        const gl = parseFloat(document.getElementById('gl_bm').value) || 0;
        const baseH = parseFloat(document.getElementById('gl_base').value) || 410;
        const steps = parseFloat(document.getElementById('step_count').value) || 1;
        const dist = parseFloat(document.getElementById('dist_road').value) || 0;

        const absGL = gl; const absRoad = -road;
        const absDomaEnd = absRoad + (dist * 0.02);
        const absBaseTop = absGL + baseH;
        const absPorchTop = absBaseTop - 120;
        const keage = Math.round(((absPorchTop - absDomaEnd) / steps) * 10) / 10;
        
        document.getElementById('stair-result').style.display = 'block';
        document.getElementById('keage_res').innerText = keage + " mm";
        
        const svg = document.getElementById('elevation-svg');
        const bY = 320;
        const minLvl = Math.min(absRoad, absGL, 0, absDomaEnd) - 80;
        const maxLvl = Math.max(absBaseTop, 0) + 80;
        const hRange = maxLvl - minLvl;
        const getP = (v) => bY - ((v - minLvl) / hRange) * 280;

        const roadX = 20; const domaX = 140; const houseX = 330;
        let res = `
            <rect x="${houseX}" y="${getP(absBaseTop)}" width="60" height="${(absBaseTop - minLvl) * (280/hRange)}" fill="#333" stroke="#555"/>
            <line x1="80" y1="${getP(absBaseTop)}" x2="380" y2="${getP(absBaseTop)}" stroke="#888" stroke-dasharray="2" stroke-width="0.5"/>
            <text x="80" y="${getP(absBaseTop)-5}" fill="#888" font-size="8">基礎天端 ±0</text>
            <path d="M ${roadX} ${getP(absRoad)} L ${domaX} ${getP(absDomaEnd)} L ${domaX} ${getP(minLvl)} L ${roadX} ${getP(minLvl)} Z" fill="#1a2a3a"/>
            <line x1="${roadX}" y1="${getP(absRoad)}" x2="${domaX}" y2="${getP(absDomaEnd)}" stroke="#5dade2" stroke-width="3"/>
        `;

        const stepW = (houseX - domaX) / steps;
        for(let i=1; i<=steps; i++) {
            const stepTopY = absPorchTop - (keage * (i-1));
            const currX = houseX - (stepW * i);
            res += `<rect x="${currX}" y="${getP(stepTopY)}" width="${stepW}" height="${(stepTopY - minLvl) * (280/hRange)}" fill="#7f8c8d" stroke="#111"/>`;
            res += `<line x1="${currX}" y1="${getP(stepTopY)}" x2="${currX+stepW}" y2="${getP(stepTopY)}" stroke="var(--orange)" stroke-width="3"/>`;
            res += `<text x="${currX+stepW-5}" y="${getP(stepTopY)-6}" fill="#fff" font-size="10" font-weight="bold" text-anchor="end">基天 -${Math.round(absBaseTop - stepTopY)}</text>`;
        }

        res += `
            <line x1="0" y1="${getP(absGL)}" x2="400" y2="${getP(absGL)}" stroke="#22c55e" stroke-dasharray="10,5" stroke-width="2"/>
            <text x="395" y="${getP(absGL)-8}" fill="#22c55e" font-size="14" font-weight="bold" text-anchor="end" style="paint-order: stroke; stroke: #000; stroke-width: 3px;">GL ${absGL>=0?'+':''}${absGL}</text>
            <line x1="0" y1="${getP(0)}" x2="400" y2="${getP(0)}" stroke="#e74c3c" stroke-dasharray="4" stroke-width="1.5"/>
            <text x="5" y="${getP(0)-5}" fill="#e74c3c" font-size="11" font-weight="bold">BM ±0</text>
        `;
        svg.innerHTML = res;
    }
</script>
</body>
</html>
