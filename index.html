<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <title>対角線電卓 PRO | 最も優れた現場計算ツール</title>
    <meta name="description" content="基礎工事・大工工事に最適な対角線電卓。枠外対応、227.5mmピッチボタン装備、簡単計算。現場で見やすく設計された最も優れた対角線計算ツールです。">
    <meta name="keywords" content="対角線電卓,対角計算,基礎工事,枠外対応,227.5mm,墨出し,建築計算,簡単計算">
    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="google-site-verification" content="RXCG31T1BkABreUsckThte0DgkAERE-3LLp_ORSPmtE" />
    <style>
        :root { --bg: #121212; --card: #1e1e1e; --blue: #00d4ff; --orange: #ff9500; --text: #e0e0e0; --border: #333; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { font-family: -apple-system, sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: env(safe-area-inset-top) 10px env(safe-area-inset-bottom); display: flex; flex-direction: column; align-items: center; }
        .container { width: 100%; max-width: 375px; padding-top: 15px; }
        header { border-left: 4px solid var(--blue); padding-left: 12px; margin-bottom: 15px; }
        header h1 { font-size: 1.1rem; margin: 0; color: white; }
        header p { font-size: 0.6rem; color: var(--blue); margin: 0; font-weight: bold; }
        .card { background: var(--card); border: 1px solid var(--border); border-radius: 12px; padding: 12px; margin-bottom: 12px; }
        .input-group { display: flex; gap: 8px; margin-bottom: 12px; }
        .input-box { flex: 1; background: #2a2a2a; border: 1px solid var(--border); border-radius: 8px; padding: 6px 10px; }
        .input-box.active { border-color: var(--blue); background: #333; }
        .input-box label { display: block; font-size: 0.55rem; color: var(--blue); font-weight: bold; }
        .input-box input { width: 100%; background: transparent; border: none; color: white; font-size: 1.3rem; outline: none; font-family: monospace; }
        .panel-ctrl { display: flex; gap: 5px; margin-bottom: 8px; }
        .tab { flex: 1; padding: 10px; background: #2a2a2a; border: none; color: #888; border-radius: 6px; font-size: 0.7rem; font-weight: bold; }
        .tab.active { background: var(--blue); color: #000; }
        
        /* ① 4列配置に変更 */
        .grid-scroll { display: grid; grid-template-columns: repeat(4, 1fr); gap: 5px; height: 180px; overflow-y: auto; background: #161616; padding: 8px; border-radius: 8px; -webkit-overflow-scrolling: touch; }
        
        .grid-btn { background: #252525; border: 1px solid var(--border); border-radius: 6px; padding: 10px 0; color: var(--text); font-size: 0.75rem; text-align: center; }
        .grid-btn span { display: block; font-size: 0.45rem; color: #888; margin-top: 2px; }
        
        .main-btn { width: 100%; padding: 16px; border: none; border-radius: 10px; background: linear-gradient(90deg, #00d4ff, #008fb3); color: white; font-weight: bold; font-size: 1rem; margin-top: 5px; }
        .table-container { width: 100%; border-radius: 12px; border: 1px solid var(--border); overflow: hidden; margin-top: 10px; }
        table { width: 100%; border-collapse: collapse; font-size: 0.8rem; background: var(--card); }
        th { text-align: left; color: #888; padding: 10px 8px; border-bottom: 1px solid var(--border); background: #252525; font-weight: normal; }
        td { padding: 10px 8px; border-bottom: 1px solid #252525; }
        .val-diag { color: var(--blue); font-weight: bold; }
        .val-outer { color: var(--orange); font-weight: bold; }
        footer { text-align: center; padding: 25px; color: #444; font-size: 0.6rem; letter-spacing: 1.5px; }
        .legal-link { color: #555; text-decoration: none; margin-top: 8px; display: inline-block; }
    </style>
</head>
<body>
<div class="container">
    <header><h1>対角線電卓 PRO</h1><p>PRO VERSION</p></header>
    <div class="card">
        <div class="input-group">
            <div class="input-box" id="boxA" onclick="setActive('A')"><label>A寸法 (図面)</label><input type="number" id="sideA" placeholder="0" inputmode="decimal"></div>
            <div class="input-box" id="boxB" onclick="setActive('B')"><label>B寸法 (図面)</label><input type="number" id="sideB" placeholder="0" inputmode="decimal"></div>
        </div>
        <div class="panel-ctrl"><button id="tabA" class="tab active" onclick="setActive('A')">Aを入力</button><button id="tabB" class="tab" onclick="setActive('B')">Bを入力</button></div>
        <div class="grid-scroll" id="buttonGrid"></div>
        <button class="main-btn" onclick="addRecord()">計算して追加</button>
    </div>
    <div class="table-container">
        <table>
            <thead><tr><th>入力</th><th>図面対角</th><th>枠外+150</th><th></th></tr></thead>
            <tbody id="historyBody"></tbody>
        </table>
    </div>
</div>
<footer>
    CREATED BY HIROKI<br>
    <a href="#" class="legal-link" onclick="alert('プライバシーポリシー：本アプリは入力データをサーバーに送信せず、ブラウザ内のみで処理を行います。')">PRIVACY POLICY</a>
</footer>
<script>
    let activeSide = 'A';
    const UNIT = 227.5;
    
    // ② 尺貫法表記の計算関数
    function getShaku(mm) {
        let totalSun = mm / 30.303; // 1寸=30.303mmとして計算
        let shaku = Math.floor(totalSun / 10);
        let sun = (totalSun % 10).toFixed(1);
        
        if (shaku === 0) return sun + "寸";
        if (sun == 0) return shaku + "尺";
        return shaku + "尺" + sun;
    }

    const grid = document.getElementById('buttonGrid');
    for (let i = 1; i <= 48; i++) {
        const val = i * UNIT;
        const btn = document.createElement('button');
        btn.className = 'grid-btn';
        // 尺表示を適用
        btn.innerHTML = `${val.toLocaleString()}<span>${getShaku(val)}</span>`;
        btn.onclick = () => { document.getElementById('side' + activeSide).value = val; };
        grid.appendChild(btn);
    }

    function setActive(side) {
        activeSide = side;
        document.getElementById('tabA').className = side === 'A' ? 'tab active' : 'tab';
        document.getElementById('tabB').className = side === 'B' ? 'tab active' : 'tab';
        document.getElementById('boxA').className = side === 'A' ? 'input-box active' : 'input-box';
        document.getElementById('boxB').className = side === 'B' ? 'input-box active' : 'input-box';
    }
    function addRecord() {
        const a = parseFloat(document.getElementById('sideA').value);
        const b = parseFloat(document.getElementById('sideB').value);
        if (!a || !b) return;
        const diag = Math.round(Math.sqrt(a*a + b*b));
        const outer = Math.round(Math.sqrt(Math.pow(a+150, 2) + Math.pow(b+150, 2)));
        const tbody = document.getElementById('historyBody');
        const row = tbody.insertRow(0);
        row.innerHTML = `<td>${a}<br><small>${b}</small></td><td class="val-diag">${diag.toLocaleString()}</td><td class="val-outer">${outer.toLocaleString()}</td><td style="text-align:center;"><button style="color:#555;background:none;border:none;font-size:1.2rem;" onclick="this.closest('tr').remove()">×</button></td>`;
    }
    setActive('A');
</script>
</body>
</html>
